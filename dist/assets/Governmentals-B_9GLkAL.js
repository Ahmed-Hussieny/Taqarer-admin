import{r as t,e as E,u as P,a as S,g as A,f as _,j as e,N as G,P as T}from"./index-BKWFdLJF.js";import{D as O,p as L,e as M}from"./Dropdown-2xz721Yb.js";import{d as V}from"./trash-DInxD9Qt.js";import{e as $}from"./View-Dmq9eV2k.js";import{p as B}from"./plus2-Cc0MLBo8.js";import{D as I,k as m}from"./index-Dy-D4uAd.js";import{P as K}from"./Pagination-CpCsC6ym.js";function R(){const[h,g]=t.useState(1),[u,f]=t.useState(""),[j,b]=t.useState([]),[w,c]=t.useState(!1),[o,x]=t.useState(null),{governmentals:r,numberOfPages:y,classifications:n}=E(s=>s.governmentals),d=P(),a=S(),p=async(s,i)=>{i==="edit"?d(`/Dashboard/edit-governmental/${s}`):i==="delete"&&(x(s),c(!0))};t.useEffect(()=>{b([{value:"",label:"الكل"},...n?n.map(s=>({value:s,label:s})):[]])},[n]);const N=async()=>{if(!o)return;const s=await a(G(o));s.payload.success?m.success("تم حذف الجهة بنجاح"):m.error(s.payload.message),c(!1),x(null)},v=s=>{g(s),l({page:s})},l=async({page:s=1,name:i="",classification:F=""})=>{await a(T({page:s,name:i,classification:F}))};t.useEffect(()=>{window.scrollTo(0,0),l({page:1}),a(A("رفع الجهات الحكومية")),a(_(4))},[]);const k=s=>{l({name:s.target.value})},D=s=>{window.open(s,"_blank")},C=s=>{l({classification:s}),f(s)};return e.jsxs("div",{className:"",children:[e.jsx(I,{position:"top-center",reverseOrder:!1}),e.jsxs("div",{className:"flow-root",children:[e.jsxs("div",{className:"grid md:grid-cols-3 grid-cols-1 gap-2",children:[e.jsx("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3 p-3 sm:p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("span",{className:"text-lg font-medium text-black whitespace-nowrap",children:"الجهات"}),e.jsx("form",{className:"flex-1",children:e.jsxs("div",{className:"relative shadow-lg rounded-lg",children:[e.jsx("div",{className:"absolute inset-y-0 start-0 flex items-center ps-3",children:e.jsx("svg",{className:"w-5 h-5 text-main_color","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})})}),e.jsx("input",{type:"search",id:"default-search",className:"ps-10 w-full text-sm text-main_color placeholder:text-main_color border border-gray-300 rounded-lg bg-gray-50 py-2.5",placeholder:"ابحث الأن ...",onChange:k})]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 col-span-2 gap-3 rounded-lg",children:[e.jsx("div",{className:"flex col-span- items-center md:justify-start w-auto justify-center",children:e.jsx(O,{label:"نوع الجهة",options:j,selectedValue:u,onChange:C})}),e.jsxs("div",{className:"flex col-span- items-center md:justify-end pb-3 sm:pb-4 justify-center gap-2",children:[e.jsxs("button",{onClick:()=>d("/Dashboard/add-governmental"),className:"text-black text-sm flex items-center gap-1 rounded-lg py-2 px-3 hover:bg-green-50 bg-[#EAF7E8] transition-colors",title:"اضافة جهة",children:[e.jsx("img",{src:L,alt:"plus",className:"w-4 h-4"}),e.jsx("span",{className:"sm:inline pe-2",children:"اضافة جهة"})]}),e.jsxs("button",{onClick:()=>d("/Dashboard/add-governmentals"),className:"text-white text-sm flex items-center gap-1 rounded-lg py-2 px-3 hover:bg-green-600 bg-[#3D9635] transition-colors",title:"اضافة مجموعة جهات حكوميه",children:[e.jsx("img",{src:B,alt:"plus2",className:"w-4 h-4"}),e.jsx("span",{className:"sm:inline pe-2",children:"اضافة جهات حكوميه"})]})]})]})]}),e.jsx("div",{className:"overflow-x-auto shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg",children:e.jsxs("table",{className:"min-w-full divide-y border-separate",children:[e.jsx("thead",{className:"bg-[#EAF7E8]",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-right text-sm font-semibold text-gray-900 sm:pl-6",children:"اسم الجهة"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-right text-sm font-semibold text-gray-900 min-w-[90px]",children:"نوع الجهة"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-right text-sm font-semibold text-gray-900 min-w-[px]",children:"الرابط"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-right text-sm font-semibold text-gray-900 min-w-[100px]",children:"خيارات"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:r==null?void 0:r.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"whitespace-nowrap flex justify-between py-4 pl-4 pr-3 items-center text-sm font-medium text-gray-900 sm:pl-6",children:e.jsx("p",{children:s==null?void 0:s.name})}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:s==null?void 0:s.classification}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500 min-w-[150px]",children:e.jsxs("button",{onClick:()=>D(`${s==null?void 0:s.link}`),className:"text-black flex items-center gap-1 rounded-lg py-2 px-3 hover:bg-gray-100 bg-[#F7F8F9] whitespace-nowrap",title:"عرض الرابط",children:[e.jsx("img",{src:$,alt:"eyes",className:"w-4 h-4 inline-block"}),e.jsx("span",{children:"عرض الرابط"})]})}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 w-40 text-sm text-gray-500 min-w-[200px]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>p(s._id,"edit"),className:"text-black flex items-center gap-1 rounded-lg py-2 px-3 hover:bg-gray-100 bg-[#F7F8F9] whitespace-nowrap",title:"تعديل",children:[e.jsx("img",{src:M,alt:"edit",className:"w-4 h-4"}),e.jsx("span",{children:"تعديل"})]}),e.jsx("button",{onClick:()=>p(s._id,"delete"),className:"text-red-600 p-2 rounded-lg bg-[#FFF1F1] hover:bg-red-50 flex items-center justify-center",title:"حذف",children:e.jsx("img",{className:"w-4 h-4",src:V,alt:"delete"})})]})})]},s==null?void 0:s._id))})]})}),e.jsx(K,{currentPage:h,numberOfPages:y,changeCurrentPage:v})]}),w&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-96",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"تأكيد الحذف"}),e.jsx("p",{className:"mb-6",children:"هل أنت متأكد أنك تريد حذف هذه الجهة؟"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 space-x-4",children:[e.jsx("button",{className:"bg-gray-300 text-gray-700 px-4 py-2 rounded",onClick:()=>c(!1),children:"إلغاء"}),e.jsx("button",{className:"bg-red-500 text-white px-4 py-2 rounded",onClick:N,children:"حذف"})]})]})})]})}function Q(){return e.jsx("div",{children:e.jsx(R,{})})}export{Q as default};
