import{b as v,a as F,u as k,r as d,g as A,f as E,j as e,F as R,G as S}from"./index-YFUO48zp.js";import{R as C}from"./index-C0BZXHCD.js";/* empty css                   */import{i as q}from"./MainArticle-Cm6VgpXZ.js";import{p as U}from"./plus2-Cc0MLBo8.js";import{c as I,a as p,d as P,F as _,e as $,E as c,g as b}from"./index.esm-DTGeCNeu.js";import{k as h}from"./index-DLVjgMMF.js";const Q=()=>{const{articleId:o}=v(),r=F(),x=k(),[u,l]=d.useState(null),f=I({image:P(),title:p().required("العنوان مطلوب"),description:p().required("الوصف مطلوب"),content:p().required("محتوى المقال مطلوب")}),j={toolbar:[[{header:[1,2,3,!1]},{font:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","video"],[{align:[]},{direction:"rtl"}],[{color:[]},{background:[]}],["clean"]]},[a,N]=d.useState(null),w=async()=>{if(o){const s=(await r(R(o))).payload.article;s&&(N({image:s.image,title:s.title,description:s.description,content:s.content}),l(s.image))}};d.useEffect(()=>{window.scrollTo(0,0),w(),r(A("رفع المقالات")),r(E(3))},[]);const y=async(t,{setSubmitting:s})=>{const n=new FormData;n.append("title",t.title),n.append("description",t.description),n.append("content",t.content),t.image&&n.append("image",t.image);try{(await r(S({id:o,apiData:n}))).payload.success?(h.success("تمت اضافة المقالة بنجاح"),x(-1)):h.error("فشلت عملية اضافة المقالة")}catch(i){console.error("Submission error:",i)}s(!1)};return e.jsx(_,{enableReinitialize:!0,initialValues:{image:"",title:(a==null?void 0:a.title)||"",description:(a==null?void 0:a.description)||"",content:(a==null?void 0:a.content)||""},validationSchema:f,onSubmit:y,children:({setFieldValue:t,isSubmitting:s,values:n})=>e.jsxs($,{children:[e.jsx("p",{className:"text-xl font-medium mb-2 text-black whitespace-nowrap",children:"اضافة مقالة"}),e.jsx("p",{className:"text-lg font-bold mb-2 text-main_color whitespace-nowrap",children:"ادخل بيانات المقالة"}),e.jsxs("div",{className:"bg-[#F7F8F9] p-2 items-center py-5 rounded-xl border mb-2 gap-3 grid md:grid-cols-5 grid-cols-1",children:[e.jsx("div",{className:"col-span-1 px-3",children:e.jsx("img",{src:u||q,alt:"Article",className:"h-28 w-32  object-cover rounded-lg"})}),e.jsxs("div",{className:"col-span-4",children:[e.jsxs("div",{className:"flex",children:[e.jsxs("label",{className:"bg-main_color text-white hover:opacity-90 border px-4 py-2 rounded-lg cursor-pointer",children:["تحميل صورة جديدة",e.jsx("input",{type:"file",name:"image",accept:"image/*",className:"hidden",onChange:i=>{var g;const m=(g=i.currentTarget.files)==null?void 0:g[0];m&&(t("image",m),l(URL.createObjectURL(m)))}})]}),e.jsx("button",{type:"button",className:"bg-[#EAF7E8] ms-2 text-main_color hover:opacity-90  border px-4 py-2 rounded-lg",onClick:()=>{t("image",null),l(null)},children:"اعادة الضبط"})]}),e.jsx(c,{name:"image",component:"div",className:"text-red-500 text-sm"}),e.jsx("p",{className:"text-sm mt-2 text-slate-400 whitespace-nowrap",children:"مسموح ب jbg او gif او png الحجم الاقصى 800 كيلوبايت"})]})]}),e.jsx("p",{className:"text-lg my-2 font-bold whitespace-nowrap",children:"عنوان المقالة"}),e.jsx(b,{type:"text",name:"title",className:"w-full mb-1 border bg-[#F7F8F9] p-2 rounded-lg",placeholder:"عنوان المقالة"}),e.jsx(c,{name:"title",component:"div",className:"text-red-500 text-sm mb-2"}),e.jsx("p",{className:"text-lg my-2 font-bold whitespace-nowrap",children:"وصف المقالة"}),e.jsx(b,{type:"text",name:"description",className:"w-full mb-1 border bg-[#F7F8F9] p-2 rounded-lg",placeholder:"وصف المقالة"}),e.jsx(c,{name:"description",component:"div",className:"text-red-500 text-sm mb-2"}),e.jsxs("p",{children:[e.jsx("span",{className:"text-lg my-2 font-bold whitespace-nowrap",children:"(المقال)"})," (ادخل محتوى المقال)"]}),e.jsx(C,{value:n.content,onChange:i=>t("content",i),modules:j,style:{direction:"rtl",textAlign:"center"},className:"mb-1"}),e.jsx(c,{name:"content",component:"div",className:"text-red-500 text-sm mb-3"}),e.jsxs("div",{className:"flex items-center md:justify-end pb-3 sm:pb-4 justify-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>x(-1),className:"text-black text-sm flex items-center gap-1 rounded-lg py-3 px-10 hover:bg-green-50 bg-[#EAF7E8] transition-colors",children:e.jsx("span",{className:"sm:inline pe-2",children:"الغاء"})}),e.jsxs("button",{type:"submit",disabled:s,className:"text-white px-16 text-sm flex items-center gap-1 rounded-lg py-3 hover:bg-green-600 bg-[#3D9635] transition-colors",children:[e.jsx("img",{src:U,alt:"plus2",className:"w-4 h-4"}),e.jsx("span",{className:"sm:inline",children:"تعديل"})]})]})]})})};export{Q as default};
