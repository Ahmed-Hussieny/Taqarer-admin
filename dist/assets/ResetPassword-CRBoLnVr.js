import{r as n,a as j,u as v,b as k,c as y,j as s,d as P}from"./index-YFUO48zp.js";import{c as b,a as m,b as N,u as C}from"./index.esm-DTGeCNeu.js";import{l as S}from"./Vectorw-DCQsGogv.js";import{k as o,D as B}from"./index-DLVjgMMF.js";const A=()=>{const[h,r]=n.useState(!1),[d,x]=n.useState(!1),[l,u]=n.useState(!1),c=j(),i=v(),{token:t}=k();n.useEffect(()=>{(async()=>{if(!t){r(!1),o.error("رمز غير صالح أو مفقود"),i("/forgot-password");return}r(!0);const a=await c(P({token:t}));a.payload.success?o.success("تم التحقق من الرمز بنجاح"):(o.error(a.payload.message),i("/forgot-password")),r(!1)})()},[t,c,i]);const f=()=>{x(!d)},p=()=>{u(!l)},g=b({newPassword:m().min(6,"يجب أن تكون كلمة المرور 6 أحرف على الأقل").required("كلمة المرور مطلوبة"),confirmPassword:m().oneOf([N("newPassword"),""],"يجب أن تتطابق كلمة المرور").required("تأكيد كلمة المرور مطلوب")}),e=C({initialValues:{token:t,newPassword:"",confirmPassword:""},validationSchema:g,onSubmit:async w=>{r(!0);const a=await c(y({token:w.token,newPassword:w.newPassword}));a.payload.success?o.success(" تم تغيير كلمة المرور بنجاح"):(o.error(a.payload.message),i("/forgot-password")),r(!1)}});return t?s.jsxs("div",{className:"m-0 p-0 ",dir:"rtl",children:[s.jsx(B,{reverseOrder:!1,position:"top-left"}),s.jsxs("div",{className:"flex flex-wrap m-0 p-0 h-screen ",children:[s.jsxs("div",{className:"w-full md:w-1/3 p-8 flex flex-col justify-center",children:[s.jsx("h6",{className:"text-xl font-semibold text-center",children:"إعادة تعيين كلمة المرور"}),s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:"newPassword",className:"block text-gray-700",children:"كلمة المرور"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:d?"text":"password",className:"w-full p-2  border border-gray-300 rounded-md",id:"newPassword",name:"newPassword",onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.newPassword}),s.jsx("span",{onClick:f,className:"absolute inset-y-0 left-3 flex items-center cursor-pointer text-gray-600",children:d?s.jsx("svg",{className:"w-6 h-6 text-gray-800 dark:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",children:s.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.933 13.909A4.357 4.357 0 0 1 3 12c0-1 4-6 9-6m7.6 3.8A5.068 5.068 0 0 1 21 12c0 1-3 6-9 6-.314 0-.62-.014-.918-.04M5 19 19 5m-4 7a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})}):s.jsxs("svg",{className:"w-6 h-6 text-gray-800 dark:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",children:[s.jsx("path",{stroke:"currentColor",strokeWidth:2,d:"M21 12c0 1.2-4.03 6-9 6s-9-4.8-9-6c0-1.2 4.03-6 9-6s9 4.8 9 6Z"}),s.jsx("path",{stroke:"currentColor",strokeWidth:2,d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]})})]}),e.touched.newPassword&&e.errors.newPassword&&s.jsx("div",{className:"text-red-600 text-sm mt-1",children:e.errors.newPassword})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:"confirmPassword",className:"block text-gray-700",children:"تأكيد كلمة المرور"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:l?"text":"password",className:"w-full p-2  border border-gray-300 rounded-md",id:"confirmPassword",name:"confirmPassword",onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.confirmPassword}),s.jsx("span",{onClick:p,className:"absolute inset-y-0 left-3 flex items-center cursor-pointer text-gray-600",children:l?s.jsx("svg",{className:"w-6 h-6 text-gray-800 dark:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",children:s.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.933 13.909A4.357 4.357 0 0 1 3 12c0-1 4-6 9-6m7.6 3.8A5.068 5.068 0 0 1 21 12c0 1-3 6-9 6-.314 0-.62-.014-.918-.04M5 19 19 5m-4 7a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})}):s.jsxs("svg",{className:"w-6 h-6 text-gray-800 dark:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24",children:[s.jsx("path",{stroke:"currentColor",strokeWidth:2,d:"M21 12c0 1.2-4.03 6-9 6s-9-4.8-9-6c0-1.2 4.03-6 9-6s9 4.8 9 6Z"}),s.jsx("path",{stroke:"currentColor",strokeWidth:2,d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]})})]}),e.touched.confirmPassword&&e.errors.confirmPassword&&s.jsx("div",{className:"text-red-600 text-sm mt-1",children:e.errors.confirmPassword})]}),s.jsx("form",{onSubmit:e.handleSubmit,children:h?s.jsxs("button",{type:"button",className:"w-full p-2 bg-gray-500 text-white rounded-md",disabled:!0,title:"Loading",children:[s.jsx("i",{className:"fa-solid fa-spinner fa-spin"}),"Loading ..."]}):s.jsx("button",{disabled:!(e.isValid&&e.dirty),type:"submit",className:"w-full p-2 bg-main_color text-white rounded-md hover:opacity-80",children:"إعادة تعيين كلمة المرور"})})]}),s.jsx("div",{className:"hidden md:block md:w-2/3 bg-main_color p-6",children:s.jsx("div",{className:" flex justify-center items-center h-full",children:s.jsx("img",{src:S,alt:"logo"})})})]})]}):s.jsx("p",{children:"Invalid or missing token."})};export{A as default};
