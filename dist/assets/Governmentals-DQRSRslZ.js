import{r as a,e as A,u as E,a as S,g as _,f as B,j as e,N as G,P}from"./index-YFUO48zp.js";import{D as T,p as M,e as O}from"./Dropdown-BtNp-jq7.js";import{d as $}from"./trash-DInxD9Qt.js";import{e as L}from"./View-Dmq9eV2k.js";import{p as V}from"./plus2-Cc0MLBo8.js";import{D as I,k as u}from"./index-DLVjgMMF.js";function K(){const[l,b]=a.useState(1),[j,f]=a.useState(""),[y,w]=a.useState([]),[N,r]=a.useState(!1),[m,h]=a.useState(null),{governmentals:n,numberOfPages:d,classifications:o}=A(s=>s.governmentals),x=E(),i=S(),g=async(s,t)=>{t==="edit"?x(`/Dashboard/edit-governmental/${s}`):t==="delete"&&(h(s),r(!0))};a.useEffect(()=>{w([{value:"",label:"الكل"},...o?o.map(s=>({value:s,label:s})):[]])},[o]);const k=async()=>{if(!m)return;const s=await i(G(m));s.payload.success?u.success("تم حذف الجهة بنجاح"):u.error(s.payload.message),r(!1),h(null)},p=s=>{b(s),c({page:s})},c=async({page:s=1,name:t="",classification:D=""})=>{await i(P({page:s,name:t,classification:D}))};a.useEffect(()=>{window.scrollTo(0,0),c({page:1}),i(_("رفع الجهات الحكومية")),i(B(4))},[]);const v=s=>{c({name:s.target.value})},C=s=>{window.open(s,"_blank")},F=s=>{c({classification:s}),f(s)};return e.jsxs("div",{className:"",children:[e.jsx(I,{position:"top-center",reverseOrder:!1}),e.jsxs("div",{className:"flow-root",children:[e.jsxs("div",{className:"grid md:grid-cols-3 grid-cols-1 gap-2",children:[e.jsx("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3 p-3 sm:p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("span",{className:"text-lg font-medium text-black whitespace-nowrap",children:"الجهات"}),e.jsx("form",{className:"flex-1",children:e.jsxs("div",{className:"relative shadow-lg rounded-lg",children:[e.jsx("div",{className:"absolute inset-y-0 start-0 flex items-center ps-3",children:e.jsx("svg",{className:"w-5 h-5 text-main_color","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})})}),e.jsx("input",{type:"search",id:"default-search",className:"ps-10 w-full text-sm text-main_color placeholder:text-main_color border border-gray-300 rounded-lg bg-gray-50 py-2.5",placeholder:"ابحث الأن ...",onChange:v})]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 col-span-2 gap-3 rounded-lg",children:[e.jsx("div",{className:"flex col-span- items-center md:justify-start w-auto justify-center",children:e.jsx(T,{label:"نوع الجهة",options:y,selectedValue:j,onChange:F})}),e.jsxs("div",{className:"flex col-span- items-center md:justify-end pb-3 sm:pb-4 justify-center gap-2",children:[e.jsxs("button",{onClick:()=>x("/Dashboard/add-governmental"),className:"text-black text-sm flex items-center gap-1 rounded-lg py-2 px-3 hover:bg-green-50 bg-[#EAF7E8] transition-colors",title:"اضافة جهة",children:[e.jsx("img",{src:M,alt:"plus",className:"w-4 h-4"}),e.jsx("span",{className:"sm:inline pe-2",children:"اضافة جهة"})]}),e.jsxs("button",{onClick:()=>x("/Dashboard/add-governmentals"),className:"text-white text-sm flex items-center gap-1 rounded-lg py-2 px-3 hover:bg-green-600 bg-[#3D9635] transition-colors",title:"اضافة مجموعة جهات حكوميه",children:[e.jsx("img",{src:V,alt:"plus2",className:"w-4 h-4"}),e.jsx("span",{className:"sm:inline pe-2",children:"اضافة جهات حكوميه"})]})]})]})]}),e.jsx("div",{className:"overflow-x-auto shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg",children:e.jsxs("table",{className:"min-w-full divide-y border-separate",children:[e.jsx("thead",{className:"bg-[#EAF7E8]",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-right text-sm font-semibold text-gray-900 sm:pl-6",children:"اسم الجهة"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-right text-sm font-semibold text-gray-900 min-w-[90px]",children:"نوع الجهة"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-right text-sm font-semibold text-gray-900 min-w-[px]",children:"الرابط"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-right text-sm font-semibold text-gray-900 min-w-[100px]",children:"خيارات"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:n==null?void 0:n.map(s=>e.jsxs("tr",{children:[e.jsxs("td",{className:"whitespace-nowrap flex justify-between py-4 pl-4 pr-3 items-center text-sm font-medium text-gray-900 sm:pl-6",children:[e.jsx("p",{children:s==null?void 0:s.name}),e.jsx("img",{src:s==null?void 0:s.image,alt:"logo",className:"w-32 h-12 inline-block rounded-full"})]}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:s==null?void 0:s.classification}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500 min-w-[150px]",children:e.jsxs("button",{onClick:()=>C(`${s==null?void 0:s.link}`),className:"text-black flex items-center gap-1 rounded-lg py-2 px-3 hover:bg-gray-100 bg-[#F7F8F9] whitespace-nowrap",title:"عرض الرابط",children:[e.jsx("img",{src:L,alt:"eyes",className:"w-4 h-4 inline-block"}),e.jsx("span",{children:"عرض الرابط"})]})}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 w-40 text-sm text-gray-500 min-w-[200px]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>g(s._id,"edit"),className:"text-black flex items-center gap-1 rounded-lg py-2 px-3 hover:bg-gray-100 bg-[#F7F8F9] whitespace-nowrap",title:"تعديل",children:[e.jsx("img",{src:O,alt:"edit",className:"w-4 h-4"}),e.jsx("span",{children:"تعديل"})]}),e.jsx("button",{onClick:()=>g(s._id,"delete"),className:"text-red-600 p-2 rounded-lg bg-[#FFF1F1] hover:bg-red-50 flex items-center justify-center",title:"حذف",children:e.jsx("img",{className:"w-4 h-4",src:$,alt:"delete"})})]})})]},s==null?void 0:s._id))})]})}),e.jsxs("div",{className:"flex justify-center items-center mt-8 mb-4",dir:"rtl",children:[e.jsx("button",{onClick:()=>p(Math.max(1,l-1)),disabled:l===1,className:"px-3 py-1 bg-[#BBC3CF] text-black hover:bg-gray-100 rounded-s-lg disabled:opacity-50","aria-label":"الصفحة السابقة",children:"<"}),[...Array(d)].map((s,t)=>e.jsx("button",{onClick:()=>p(t+1),className:`px-3 py-1 flex items-center justify-center ${l===t+1?"bg-[#BBC3CF] text-black border":"text-black bg-[#F7F8F9] border border-1/2 border-slate-300"}`,"aria-label":`الصفحة ${t+1}`,children:e.jsx("span",{children:t+1})},t+1)),e.jsx("button",{onClick:()=>p(Math.min(d,l+1)),disabled:l===d,className:"px-3 py-1 bg-[#BBC3CF] text-black hover:bg-gray-100 rounded-l-lg disabled:opacity-50","aria-label":"الصفحة التالية",children:">"})]})]}),N&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-96",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"تأكيد الحذف"}),e.jsx("p",{className:"mb-6",children:"هل أنت متأكد أنك تريد حذف هذه الجهة؟"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 space-x-4",children:[e.jsx("button",{className:"bg-gray-300 text-gray-700 px-4 py-2 rounded",onClick:()=>r(!1),children:"إلغاء"}),e.jsx("button",{className:"bg-red-500 text-white px-4 py-2 rounded",onClick:k,children:"حذف"})]})]})})]})}function H(){return e.jsx("div",{children:e.jsx(K,{})})}export{H as default};
