import{u,a as h,r as l,g,j as e,m as f}from"./index-CX1t2Ghj.js";import{c as j,d as b,F as N,e as y,E as v}from"./index.esm--UJspW4j.js";import{p as w}from"./plus2-Cc0MLBo8.js";/* empty css                         */import{D as E,c}from"./index-fIHkrhVy.js";const L=()=>{const m=u(),n=h(),[r,i]=l.useState(!1),[o,x]=l.useState(null),d={reportExcel:null},p=j({reportExcel:b().required("مطلوب")});return l.useEffect(()=>{n(g("رفع التقارير"))},[]),e.jsxs("div",{children:[e.jsx(E,{position:"top-center",reverseOrder:!1}),e.jsx(N,{initialValues:d,validationSchema:p,onSubmit:async a=>{i(!0);const s=new FormData;a.reportExcel&&s.append("excel",a.reportExcel);const t=await n(f(s));i(!1),t.payload.success?c.success("تمت الإضافة بنجاح"):c.error(t.payload.message)},children:({setFieldValue:a})=>e.jsxs(y,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"رفع ملف Excel"}),e.jsx("input",{type:"file",accept:".xlsx,.xls",id:"file-upload",className:"hidden",onChange:s=>{if(s.currentTarget.files&&s.currentTarget.files.length>0){const t=s.currentTarget.files[0];a("reportExcel",t),x(t.name)}}}),e.jsxs("label",{htmlFor:"file-upload",className:"mt-1 flex items-center justify-center w-full bg-[#F7F8F9] p-2 rounded-lg border border-[#999999] cursor-pointer hover:bg-gray-200 transition",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1M8 12l4-4m0 0l4 4m-4-4v12"})}),e.jsx("span",{className:"ml-2 text-gray-700",children:"رفع ملف Excel"})]}),e.jsx("p",{className:"mt-2 text-sm text-blue-600 hover:text-blue-800",children:e.jsx("a",{href:"/src/assets/samples/مثال رفع تقارير.xlsx",download:"مثال رفع تقارير.xlsx",target:"_blank",rel:"noopener noreferrer",children:"اضغط هنا لتحميل نموذج الملف"})}),o&&e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["الملف المحدد: ",o]}),e.jsx(v,{name:"reportExcel",component:"div",className:"text-red-500 text-sm mt-1"})]}),e.jsxs("div",{className:"flex justify-center md:justify-end gap-2 pb-3 sm:pb-4",children:[e.jsx("button",{onClick:()=>m(-1),type:"button",className:"text-black text-sm flex items-center gap-1 rounded-lg py-3 px-6 hover:bg-green-50 bg-[#EAF7E8] transition-colors",title:"الغاء",disabled:r,children:e.jsx("span",{className:"sm:inline pe-2",children:"الغاء"})}),e.jsxs("button",{type:"submit",className:"text-white text-sm flex items-center gap-1 rounded-lg py-3 px-3 bg-[#3D9635] hover:bg-green-600 transition-colors",title:"اضافة التقرير",disabled:r,children:[r?e.jsxs("svg",{className:"animate-spin h-4 w-4 text-white",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})]}):e.jsx("img",{src:w,alt:"plus2",className:"w-4 h-4"}),e.jsx("span",{className:"sm:inline pe-2",children:r?"جاري التحميل...":"اضافة التقرير"})]})]})]})})]})};export{L as default};
