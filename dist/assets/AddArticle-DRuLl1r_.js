import{a as f,u as N,r as x,g as w,f as y,j as e,E as v}from"./index-C06iv4jk.js";import{R as k}from"./index-BD-jZ_xM.js";/* empty css                   */import{i as F}from"./MainArticle-Cm6VgpXZ.js";import{p as E}from"./plus2-Cc0MLBo8.js";import{c as A,a as i,d as q,F as C,e as R,E as n,g as o}from"./index.esm-Sbsx__qc.js";import{k as g}from"./index-DBr3TQ1Z.js";const P=()=>{const r=f(),m=N(),[b,d]=x.useState(null),u=A({image:q().required("الصورة مطلوبة").test("fileType","يجب أن تكون الصورة من نوع jpg, jpeg, png, أو gif",t=>t?["image/jpg","image/jpeg","image/png","image/gif"].includes(t.type):!0),title:i().required("العنوان مطلوب"),description:i().required("الوصف مطلوب"),link:i().url("الرابط غير صحيح"),content:i().required("محتوى المقال مطلوب")}),h={toolbar:[[{header:[1,2,3,!1]},{font:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","video"],[{align:[]},{direction:"rtl"}],[{color:[]},{background:[]}],["clean"]]};x.useEffect(()=>{window.scrollTo(0,0),r(w("رفع المقالات")),r(y(3))},[]);const j=async(t,{setSubmitting:l})=>{const s=new FormData;s.append("title",t.title),s.append("description",t.description),s.append("content",t.content),s.append("link",t.link),t.image&&s.append("image",t.image);try{(await r(v(s))).payload.success?(g.success("تمت اضافة المقالة بنجاح"),m(-1)):g.error("فشلت عملية اضافة المقالة")}catch(a){console.error("Submission error:",a)}l(!1)};return e.jsx(C,{initialValues:{image:null,title:"",description:"",content:"",link:""},validationSchema:u,onSubmit:j,children:({setFieldValue:t,isSubmitting:l,values:s})=>e.jsxs(R,{children:[e.jsx("p",{className:"text-xl font-medium mb-2 text-black whitespace-nowrap",children:"اضافة مقالة"}),e.jsx("p",{className:"text-lg font-bold mb-2 text-main_color whitespace-nowrap",children:"ادخل بيانات المقالة"}),e.jsxs("div",{className:"bg-[#F7F8F9] p-2 items-center py-5 rounded-xl border mb-2 gap-3 grid md:grid-cols-5 grid-cols-1",children:[e.jsx("div",{className:"col-span-1 px-3",children:e.jsx("img",{src:b||F,alt:"Article",className:"h-24 w-24  object-cover rounded-lg"})}),e.jsxs("div",{className:"col-span-4",children:[e.jsxs("div",{className:"flex",children:[e.jsxs("label",{className:"bg-main_color text-white hover:opacity-90 border px-4 py-2 rounded-lg cursor-pointer",children:["تحميل صورة جديدة",e.jsx("input",{type:"file",name:"image",accept:"image/*",className:"hidden",onChange:a=>{var p;const c=(p=a.currentTarget.files)==null?void 0:p[0];c&&(t("image",c),d(URL.createObjectURL(c)))}})]}),e.jsx("button",{type:"button",className:"bg-[#EAF7E8] ms-2 text-main_color hover:opacity-90  border px-4 py-2 rounded-lg",onClick:()=>{t("image",null),d(null)},children:"اعادة الضبط"})]}),e.jsx(n,{name:"image",component:"div",className:"text-red-500 text-sm"}),e.jsx("p",{className:"text-sm mt-2 text-slate-400 whitespace-nowrap",children:"مسموح ب jbg او gif او png الحجم الاقصى 800 كيلوبايت"})]})]}),e.jsx("p",{className:"text-lg my-2 font-bold whitespace-nowrap",children:"عنوان المقالة"}),e.jsx(o,{type:"text",name:"title",className:"w-full mb-1 border bg-[#F7F8F9] p-2 rounded-lg",placeholder:"عنوان المقالة"}),e.jsx(n,{name:"title",component:"div",className:"text-red-500 text-sm mb-2"}),e.jsx("p",{className:"text-lg my-2 font-bold whitespace-nowrap",children:"رابط المقالة"}),e.jsx(o,{type:"text",name:"link",className:"w-full mb-1 border bg-[#F7F8F9] p-2 rounded-lg",placeholder:"عنوان المقالة"}),e.jsx(n,{name:"link",component:"div",className:"text-red-500 text-sm mb-2"}),e.jsx("p",{className:"text-lg my-2 font-bold whitespace-nowrap",children:"وصف المقالة"}),e.jsx(o,{type:"text",name:"description",className:"w-full mb-1 border bg-[#F7F8F9] p-2 rounded-lg",placeholder:"وصف المقالة"}),e.jsx(n,{name:"description",component:"div",className:"text-red-500 text-sm mb-2"}),e.jsxs("p",{children:[e.jsx("span",{className:"text-lg my-2 font-bold whitespace-nowrap",children:"(المقال)"})," (ادخل محتوى المقال)"]}),e.jsx(k,{value:s.content,onChange:a=>t("content",a),modules:h,style:{direction:"rtl",textAlign:"center"},className:"mb-1"}),e.jsx(n,{name:"content",component:"div",className:"text-red-500 text-sm mb-3"}),e.jsxs("div",{className:"flex items-center md:justify-end pb-3 sm:pb-4 justify-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>m(-1),className:"text-black text-sm flex items-center gap-1 rounded-lg py-3 px-10 hover:bg-green-50 bg-[#EAF7E8] transition-colors",children:e.jsx("span",{className:"sm:inline pe-2",children:"الغاء"})}),e.jsxs("button",{type:"submit",disabled:l,className:"text-white px-16 text-sm flex items-center gap-1 rounded-lg py-3 hover:bg-green-600 bg-[#3D9635] transition-colors",children:[e.jsx("img",{src:E,alt:"plus2",className:"w-4 h-4"}),e.jsx("span",{className:"sm:inline",children:"اضافة"})]})]})]})})};export{P as default};
