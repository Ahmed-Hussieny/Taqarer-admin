import{a as F,r as n,e as k,g as _,f as B,j as e,a5 as D,a6 as E,a7 as L}from"./index-YFUO48zp.js";import{d as I}from"./trash-DInxD9Qt.js";import{D as A,k as t}from"./index-DLVjgMMF.js";const w="data:image/svg+xml,%3csvg%20width='21'%20height='20'%20viewBox='0%200%2021%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M7.56637%202.86001C8.88956%200.568192%2011.8201%20-0.217041%2014.1119%201.10614C16.4037%202.42932%2017.189%205.35986%2015.8658%207.65168L15.7757%207.80776C16.8442%209.58282%2017.0255%2011.8213%2016.126%2013.8065C15.995%2014.0957%2015.8117%2014.4132%2015.4945%2014.9625L15.4619%2015.0191C15.424%2015.0847%2015.3847%2015.1529%2015.3422%2015.2122C14.937%2015.7777%2014.1887%2015.9783%2013.555%2015.6911C13.4886%2015.661%2013.4205%2015.6216%2013.3549%2015.5837L8.19543%2012.6049L5.1746%2017.8371C5.00201%2018.1361%204.61977%2018.2385%204.32083%2018.0659C4.0219%2017.8933%203.91948%2017.5111%204.09207%2017.2121L7.1129%2011.9799L1.9535%209.00113C1.88784%208.96328%201.81966%208.92399%201.76038%208.88151C1.19486%208.47626%200.994354%207.72796%201.28149%207.09425C1.31159%207.02782%201.35098%206.9597%201.38892%206.8941L1.42154%206.83763C1.73872%206.28822%201.92202%205.97071%202.10699%205.71259C3.3762%203.94141%205.40487%202.97917%207.47595%203.01663L7.56637%202.86001Z'%20fill='%23F59E0B'/%3e%3c/svg%3e";function V(){const r=F(),[d,N]=n.useState(1),{clientUsers:c,numberOfPages:i}=k(a=>a.user),[m,x]=n.useState(null),[l,g]=n.useState(null),o=async({page:a=1,email:s=""})=>{await r(D({page:a,email:s}))},v=a=>{o({email:a.target.value})},p=a=>{N(a),o({page:a})};n.useEffect(()=>{window.scrollTo(0,0),o({page:1}),r(_("الاشتراك")),r(B(6))},[]);const C=async a=>{try{x(a),(await r(E(a))).payload.success?t.success("تم حذف المشترك"):t.error("لم يتم حذف المشترك")}catch{t.error("حدث خطأ أثناء الحذف")}finally{x(null)}},h=async a=>{try{g(a),(await r(L(a))).payload.user.isVerified?t.success("تم تفعيل المشترك"):t.success("تم تعليق المشترك")}catch{t.error("حدث خطأ أثناء التحديث")}finally{g(null)}};return e.jsxs("div",{children:[e.jsx(A,{position:"top-center",reverseOrder:!1}),e.jsxs("div",{className:"grid md:grid-cols-3 grid-cols-1 mb-4 gap-2",children:[e.jsx("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3 p-3 sm:p-4 rounded-lg",children:e.jsx("div",{className:"flex items-center gap-3 flex-1",children:e.jsx("span",{className:"text-lg font-medium text-black whitespace-nowrap",children:"المشتركين"})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 col-span-2 gap-3 rounded-lg",children:[e.jsx("div",{className:"flex col-span- items-center md:justify-start w-auto justify-center",children:e.jsx("form",{className:"flex-1",children:e.jsxs("div",{className:"relative shadow-lg rounded-lg",children:[e.jsx("div",{className:"absolute inset-y-0 start-0 flex items-center ps-3",children:e.jsx("svg",{className:"w-5 h-5 text-main_color","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})})}),e.jsx("input",{type:"search",id:"default-search",className:"ps-10 w-full text-sm text-main_color placeholder:text-main_color border border-gray-300 rounded-lg bg-[#F7F8F9] py-2.5",placeholder:"البحث عن مشترك...",onChange:v})]})})}),e.jsx("div",{className:"flex col-span- items-center md:justify-end pb-3 sm:pb-4 justify-center gap-2"})]})]}),e.jsx("div",{className:"overflow-x-auto shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg",children:e.jsxs("table",{className:"min-w-full divide-y border-separate",children:[e.jsx("thead",{className:"bg-[#EAF7E8]",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-center text-sm font-semibold text-gray-900 sm:pl-6",children:"اسم المشترك"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900 min-w-[90px]",children:"ايميل المشترك"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900 min-w-[px]",children:"التحقق"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900 min-w-[px]",children:"نوع الاشتراك"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900 min-w-[px]",children:"قيمة الاشتراك"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900 min-w-[px]",children:"مدة الاشتراك"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900 min-w-[200px]",children:"خيارات"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:c==null?void 0:c.map(a=>{var s,u,b,j,f,y;return e.jsxs("tr",{children:[e.jsx("td",{className:"whitespace-nowrap py-4 pl-4 pr-3 text-center text-sm font-medium text-gray-900 sm:pl-6",children:a==null?void 0:a.username}),e.jsx("td",{className:"whitespace-nowrap py-4 pl-4 pr-3 text-center text-sm font-medium text-gray-900 sm:pl-6",children:a==null?void 0:a.email}),e.jsx("td",{className:"whitespace-nowrap py-4 pl-4 pr-3 text-center text-sm font-medium text-gray-900 sm:pl-6",children:a!=null&&a.isVerified?e.jsx("div",{className:"p-2 bg-[#C0F7F0] rounded-lg",children:"مؤكد"}):e.jsx("div",{className:"p-2 bg-[#FFD6D6] rounded-lg",children:"غير مؤكد"})}),e.jsx("td",{className:"whitespace-nowrap py-4 pl-4 pr-3 text-center text-sm font-medium text-gray-900 sm:pl-6",children:(s=a==null?void 0:a.packageId)!=null&&s.name?e.jsxs(e.Fragment,{children:["  الباقة ",(u=a==null?void 0:a.packageId)==null?void 0:u.name]}):"___"}),e.jsx("td",{className:"whitespace-nowrap py-4 pl-4 pr-3 text-center text-sm font-medium text-gray-900 sm:pl-6",children:(b=a==null?void 0:a.packageId)!=null&&b.price?e.jsxs(e.Fragment,{children:["  ",(j=a==null?void 0:a.packageId)==null?void 0:j.price,"  ريال  "]}):"___"}),e.jsxs("td",{className:"whitespace-nowrap py-4 pl-4 pr-3 text-center text-sm font-medium text-gray-900 sm:pl-6",children:[e.jsx("p",{children:(f=a==null?void 0:a.startDate)==null?void 0:f.split("T")[0]}),e.jsx("p",{children:(y=a==null?void 0:a.endDate)==null?void 0:y.split("T")[0]})]}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 w-40 text-sm text-gray-500 min-w-[200px]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[a.isVerified?e.jsx("button",{onClick:()=>h(a._id),disabled:l===a._id,className:"text-[#F59E0B] flex items-center gap-1 rounded-lg py-2 px-3 hover:bg-gray-100 bg-[#FFF6E7] whitespace-nowrap",title:"تعليق",children:l===a._id?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-current border-t-transparent rounded-full"}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:w,alt:"pin",className:"w-4 h-4"}),e.jsx("span",{children:"تعليق"})]})}):e.jsx("button",{onClick:()=>h(a._id),disabled:l===a._id,className:"text-[#F59E0B] flex items-center gap-1 rounded-lg py-2 px-3 hover:bg-gray-100 bg-[#FFF6E7] whitespace-nowrap",title:"تفعيل",children:l===a._id?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-current border-t-transparent rounded-full"}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:w,alt:"pin",className:"w-4 h-4"}),e.jsx("span",{children:"تفعيل"})]})}),e.jsx("button",{onClick:()=>C(a._id),disabled:m===a._id,className:"text-red-600 p-2 rounded-lg bg-[#FFF1F1] hover:bg-red-50 flex items-center justify-center",title:"حذف",children:m===a._id?e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-current border-t-transparent rounded-full"}):e.jsx("img",{className:"w-4 h-4",src:I,alt:"delete"})})]})})]},a==null?void 0:a._id)})})]})}),e.jsxs("div",{className:"flex justify-center items-center mt-8 mb-4",dir:"rtl",children:[e.jsx("button",{onClick:()=>p(Math.max(1,d-1)),disabled:d===1,className:"px-3 py-1 bg-[#BBC3CF]  text-black hover:bg-gray-100 rounded-s-lg disabled:opacity-50","aria-label":"الصفحة السابقة",children:"< "}),[...Array(i)].map((a,s)=>e.jsx("button",{onClick:()=>p(s+1),className:`px-3 py-1 flex items-center justify-center ${d===s+1?"bg-[#BBC3CF]  text-black border":"text-black bg-[#F7F8F9] border border-1/2 border-slate-300"}`,"aria-label":`الصفحة ${s+1}`,children:e.jsx("span",{children:s+1})},s+1)),e.jsx("button",{onClick:()=>p(Math.min(i,d+1)),disabled:d===i,className:"px-3 py-1 bg-[#BBC3CF]  text-black hover:bg-gray-100 rounded-l-lg disabled:opacity-50","aria-label":"الصفحة التالية",children:"> "})]})]})}export{V as default};
