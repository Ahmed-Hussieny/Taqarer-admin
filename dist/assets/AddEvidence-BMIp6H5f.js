import{r as n,u as N,a as y,g as F,f as k,j as e,w as v}from"./index-C06iv4jk.js";import{c as w,d as S,a as o,f as C,F as D,e as P,g as l,E as a}from"./index.esm-Sbsx__qc.js";import{p as u}from"./plus2-Cc0MLBo8.js";import{D as Y}from"./index.es-BezHZwns.js";/* empty css                         */import{D as E,c as g}from"./index-DBr3TQ1Z.js";const T=()=>{const[c,b]=n.useState(null),[i,h]=n.useState(null),[m,p]=n.useState(!1),x=N(),f={reportId:"",reportName:"",reportCategory:"",reportSource:"",reportYear:null,reportSummary:"",reportLink:"",reportPdf:null},j=w({reportId:o().required("مطلوب"),reportName:o().required("مطلوب"),reportCategory:o().required("مطلوب"),reportSource:o().required("مطلوب"),reportYear:C().required("مطلوب"),reportSummary:o(),reportLink:o().url("يجب أن يكون رابط صالح"),reportPdf:S().required("مطلوب")}),d=y();return n.useEffect(()=>{d(F("رفع الدليل")),d(k(2))},[]),e.jsxs("div",{className:"",children:[e.jsx(E,{position:"top-center",reverseOrder:!1}),e.jsx(D,{initialValues:f,validationSchema:j,onSubmit:async s=>{p(!0);const r=new FormData;r.append("reportId",s.reportId),r.append("name",s.reportName),r.append("classification",s.reportCategory),r.append("source",s.reportSource),r.append("year",s.reportYear?s.reportYear.toString():""),r.append("description",s.reportSummary),r.append("link",s.reportLink),s.reportPdf&&r.append("pdf",s.reportPdf);const t=await d(v(r));t.payload.success?(g.success("تمت الإضافة بنجاح"),x(-1)):g.error(t.payload.message),p(!1)},children:({setFieldValue:s})=>e.jsxs(P,{className:"space-y-6",children:[e.jsx("h2",{className:"font-bold text-main_color",children:"ادخل بيانات الدليل"}),e.jsxs("div",{className:"grid md:grid-cols-3 grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"رقم الدليل"}),e.jsx(l,{type:"text",name:"reportId",className:"mt-1 block w-full bg-[#F7F8F9] p-2 rounded-lg border border-[#999999]"}),e.jsx(a,{name:"reportId",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"اسم الدليل"}),e.jsx(l,{type:"text",name:"reportName",className:"mt-1 block w-full bg-[#F7F8F9] p-2 rounded-lg border border-[#999999]"}),e.jsx(a,{name:"reportName",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"تصنيف الدليل"}),e.jsx(l,{type:"text",name:"reportCategory",className:"mt-1 block w-full bg-[#F7F8F9] p-2 rounded-lg border border-[#999999]"}),e.jsx(a,{name:"reportCategory",component:"div",className:"text-red-500 text-sm"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"مصدر الدليل"}),e.jsx(l,{type:"text",name:"reportSource",className:"mt-1 block w-full bg-[#F7F8F9] p-2 rounded-lg border border-[#999999]"}),e.jsx(a,{name:"reportSource",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{className:"w-full bg",children:[e.jsx("label",{className:"block text-sm font-medium",children:"سنة الدليل"}),e.jsx(Y,{selected:c?new Date(c,0,1):null,onChange:r=>{if(r){const t=r.getFullYear();b(t),s("reportYear",t)}},showYearPicker:!0,dateFormat:"yyyy",className:"mt-1 block bg-[#F7F8F9]  w-96 p-2 rounded-lg border border-[#999999]"}),e.jsx(a,{name:"reportYear",component:"div",className:"text-red-500 text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"نبذه عن الدليل"}),e.jsx(l,{as:"textarea",name:"reportSummary",className:"mt-1 block w-full bg-[#F7F8F9] p-2 rounded-lg border border-[#999999]"}),e.jsx(a,{name:"reportSummary",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"رابط الدليل الأساسي"}),e.jsx(l,{type:"text",name:"reportLink",className:"mt-1 block w-full bg-[#F7F8F9] p-2 rounded-lg border border-[#999999]",placeholder:"ادخل الرابط ..."}),e.jsx(a,{name:"reportLink",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"رفع الملفات"}),e.jsx("input",{type:"file",accept:".pdf",id:"file-upload",title:"رفع الملفات",className:"hidden",onChange:r=>{if(r.currentTarget.files&&r.currentTarget.files.length>0){const t=r.currentTarget.files[0];s("reportPdf",t),h(t.name)}}}),e.jsxs("label",{htmlFor:"file-upload",className:"mt-1 flex items-center justify-center w-full bg-[#F7F8F9] p-2 rounded-lg border border-[#999999] cursor-pointer hover:bg-gray-200 transition",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1M8 12l4-4m0 0l4 4m-4-4v12"})}),e.jsx("span",{className:"ml-2 text-gray-700",children:"رفع ملف PDF"})]}),i&&e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["الملف المحدد: ",i]}),e.jsx(a,{name:"reportPdf",component:"div",className:"text-red-500 text-sm mt-1"})]}),e.jsxs("div",{className:"flex col-span- items-center md:justify-end pb-3 sm:pb-4 justify-center gap-2",children:[e.jsx("button",{onClick:()=>x(-1),type:"submit",className:"text-black text-sm flex items-center gap-1 rounded-lg py-3 px-6 hover:bg-green-50 bg-[#EAF7E8] transition-colors",title:"الغاء",children:e.jsx("span",{className:"sm:inline pe-2",children:"الغاء"})}),e.jsxs("button",{className:"text-white  text-sm flex items-center gap-1 rounded-lg py-3 px-3 hover:bg-green-600 bg-[#3D9635] transition-colors",title:"اضافة الدليل",children:[e.jsx("img",{src:u,alt:"plus2",className:"w-4 h-4"}),e.jsx("span",{className:" sm:inline pe-2",children:"اضافة الدليل"})]}),e.jsx("button",{type:"submit",className:"px-4 flex items-cente py-2 bg-main_color text-white rounded-lg hover:bg-opacity-90 transition disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:m,children:m?e.jsxs("span",{className:"flex items-center",children:[e.jsx("svg",{className:"animate-spin h-5 w-5 mr-2 border-t-2 border-white rounded-full",viewBox:"0 0 24 24"}),"جاري الإضافة..."]}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:u,alt:"plus2",className:"w-4 h-4"}),e.jsx("span",{className:" sm:inline pe-2",children:"اضافة الدليل"})]})})]})]})})]})};export{T as default};
