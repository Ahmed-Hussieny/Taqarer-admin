import{a as g,u as b,b as h,r as l,g as f,f as j,j as e,S as v,T as N}from"./index-YFUO48zp.js";import{c as k,a as n,F,e as y,g as r,E as i}from"./index.esm-DTGeCNeu.js";import{D as w,c}from"./index-DLVjgMMF.js";import{p as E}from"./plus2-Cc0MLBo8.js";const A=()=>{const a=g(),o=b(),{governmentalId:t}=h(),[d,x]=l.useState({name:"",link:"",classification:"",description:""});l.useEffect(()=>{if(!t)return;(async()=>{try{const{payload:s}=await a(v(t));s!=null&&s.success&&x({name:s.governmental.name||"",link:s.governmental.link||"",classification:s.governmental.classification||"",description:s.governmental.description||""})}catch{c.error("فشل تحميل الجهة الحكومية")}})()},[a,t]),l.useEffect(()=>{a(f("رفع الجهات الحكومية")),a(j(4))},[a]);const p=k({name:n().required("مطلوب"),link:n().url("يجب أن يكون رابط صالح").required("مطلوب"),classification:n().required("مطلوب"),description:n().required("مطلوب")}),u=async m=>{try{const{payload:s}=await a(N({id:t,apiData:m}));if(s.success)c.success("تم التحديث بنجاح"),o(-1);else throw new Error(s.message||"خطأ أثناء التحديث")}catch(s){c.error(s instanceof Error?s.message:"حدث خطأ غير معروف")}};return e.jsxs("div",{className:"p-4 py-0",children:[e.jsx(w,{position:"top-right"}),e.jsx(F,{initialValues:d,enableReinitialize:!0,validationSchema:p,onSubmit:u,children:()=>e.jsxs(y,{className:"space-y-6",children:[e.jsx("h2",{className:"font-bold text-main_color",children:"ادخل بيانات الجهة الحكومية"}),e.jsxs("div",{className:"grid md:grid-cols-2 grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"رقم التقرير"}),e.jsx(r,{type:"text",name:"name",className:"mt-1 block w-full bg-[#F7F8F9] p-2 rounded-lg border border-[#999999]"}),e.jsx(i,{name:"name",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:" رابط الجهة"}),e.jsx(r,{type:"text",name:"link",className:"mt-1 block w-full bg-[#F7F8F9] p-2 rounded-lg border border-[#999999]"}),e.jsx(i,{name:"link",component:"div",className:"text-red-500 text-sm"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"مصدر التقرير"}),e.jsx(r,{type:"text",name:"classification",className:"mt-1 block w-full bg-[#F7F8F9] p-2 rounded-lg border border-[#999999]"}),e.jsx(i,{name:"classification",component:"div",className:"text-red-500 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"نبذه عن التقرير"}),e.jsx(r,{as:"textarea",name:"description",className:"mt-1 block w-full bg-[#F7F8F9] p-2 rounded-lg border border-[#999999]"}),e.jsx(i,{name:"description",component:"div",className:"text-red-500 text-sm"})]})]}),e.jsxs("div",{className:"flex items-center md:justify-end pb-3 sm:pb-4 justify-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>o(-1),className:"text-black text-sm flex items-center gap-1 rounded-lg py-3 px-6 hover:bg-green-50 bg-[#EAF7E8] transition-colors",children:e.jsx("span",{className:"sm:inline pe-2",children:"الغاء"})}),e.jsxs("button",{type:"submit",className:"text-white text-sm flex items-center gap-1 rounded-lg py-3 px-3 hover:bg-green-600 bg-main_color transition-colors",children:[e.jsx("img",{src:E,alt:"plus2",className:"w-4 h-4"}),e.jsx("span",{className:"sm:inline pe-2",children:"تعديل الجهة الحكومية"})]})]})]})})]})};export{A as default};
