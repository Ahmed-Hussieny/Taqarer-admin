import{a as j,u as N,r as g,g as w,f as y,j as e,E as F}from"./index-BKWFdLJF.js";import{R as k,C as v}from"./ClipLoader-1eirUGdC.js";/* empty css                   */import{i as E}from"./MainArticle-Cm6VgpXZ.js";import{p as A}from"./plus2-Cc0MLBo8.js";import{c as C,a as l,d as q,F as D,e as R,E as r,g as c}from"./index.esm-BO_zn8Fc.js";import{k as m}from"./index-Dy-D4uAd.js";const U=()=>{const o=j(),d=N(),[b,p]=g.useState(null),h=C({image:q().required("الصورة مطلوبة").test("fileType","يجب أن تكون الصورة من نوع jpg, jpeg, png, أو gif",t=>t?["image/jpg","image/jpeg","image/png","image/gif"].includes(t.type):!0),title:l().required("العنوان مطلوب"),description:l().required("الوصف مطلوب"),link:l().url("الرابط غير صحيح"),content:l().required("محتوى المقال مطلوب")}),u={toolbar:[[{header:[1,2,3,!1]},{font:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","video"],[{align:[]},{direction:"rtl"}],[{color:[]},{background:[]}],["clean"]]};g.useEffect(()=>{window.scrollTo(0,0),o(w("رفع المقالات")),o(y(3))},[]);const f=async(t,{setSubmitting:i})=>{const s=new FormData;s.append("title",t.title),s.append("description",t.description),s.append("link",t.link),t.image&&s.append("image",t.image);const n=new File([t.content],"article_content.txt",{type:"text/plain"});s.append("contentFile",n),console.log("formData:",t.content);try{(await o(F(s))).payload.success?(m.success("تمت اضافة المقالة بنجاح"),d(-1)):m.error("فشلت عملية اضافة المقالة")}catch(a){console.error("Submission error:",a),m.error("حدث خطأ أثناء إضافة المقالة")}i(!1)};return e.jsx(D,{initialValues:{image:null,title:"",description:"",content:"",link:""},validationSchema:h,onSubmit:f,children:({setFieldValue:t,isSubmitting:i,values:s})=>e.jsxs(R,{children:[e.jsx("p",{className:"text-xl font-medium mb-2 text-black whitespace-nowrap",children:"اضافة مقالة"}),e.jsx("p",{className:"text-lg font-bold mb-2 text-main_color whitespace-nowrap",children:"ادخل بيانات المقالة"}),e.jsxs("div",{className:"bg-[#F7F8F9] p-2 items-center py-5 rounded-xl border mb-2 gap-3 grid md:grid-cols-5 grid-cols-1",children:[e.jsx("div",{className:"col-span-1 px-3",children:e.jsx("img",{src:b||E,alt:"Article",className:"h-24 w-24 object-cover rounded-lg"})}),e.jsxs("div",{className:"col-span-4",children:[e.jsxs("div",{className:"flex",children:[e.jsxs("label",{className:"bg-main_color text-white hover:opacity-90 border px-4 py-2 rounded-lg cursor-pointer",children:["تحميل صورة جديدة",e.jsx("input",{type:"file",name:"image",accept:"image/*",className:"hidden",onChange:async n=>{var x;const a=(x=n.currentTarget.files)==null?void 0:x[0];a&&(t("image",a),p(URL.createObjectURL(a)))}})]}),e.jsx("button",{type:"button",className:"bg-[#EAF7E8] ms-2 text-main_color hover:opacity-90 border px-4 py-2 rounded-lg",onClick:()=>{t("image",null),p(null)},children:"اعادة الضبط"})]}),e.jsx(r,{name:"image",component:"div",className:"text-red-500 text-sm"}),e.jsx("p",{className:"text-sm mt-2 text-slate-400 whitespace-nowrap",children:"مسموح ب jpg أو gif أو png. الحجم الأقصى 1 ميجابايت"})]})]}),e.jsx("p",{className:"text-lg my-2 font-bold whitespace-nowrap",children:"عنوان المقالة"}),e.jsx(c,{type:"text",name:"title",className:"w-full mb-1 border bg-[#F7F8F9] p-2 rounded-lg",placeholder:"عنوان المقالة"}),e.jsx(r,{name:"title",component:"div",className:"text-red-500 text-sm mb-2"}),e.jsx("p",{className:"text-lg my-2 font-bold whitespace-nowrap",children:"رابط المقالة"}),e.jsx(c,{type:"text",name:"link",className:"w-full mb-1 border bg-[#F7F8F9] p-2 rounded-lg",placeholder:"رابط المقالة"}),e.jsx(r,{name:"link",component:"div",className:"text-red-500 text-sm mb-2"}),e.jsx("p",{className:"text-lg my-2 font-bold whitespace-nowrap",children:"وصف المقالة"}),e.jsx(c,{type:"text",name:"description",className:"w-full mb-1 border bg-[#F7F8F9] p-2 rounded-lg",placeholder:"وصف المقالة"}),e.jsx(r,{name:"description",component:"div",className:"text-red-500 text-sm mb-2"}),e.jsxs("p",{children:[e.jsx("span",{className:"text-lg my-2 font-bold whitespace-nowrap",children:"(المقال)"})," (ادخل محتوى المقال)"]}),e.jsx(k,{value:s.content,onChange:n=>t("content",n),modules:u,style:{direction:"rtl",textAlign:"center"},className:"mb-1"}),e.jsx(r,{name:"content",component:"div",className:"text-red-500 text-sm mb-3"}),e.jsxs("div",{className:"flex items-center md:justify-end pb-3 sm:pb-4 justify-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>d(-1),className:"text-black text-sm flex items-center gap-1 rounded-lg py-3 px-10 hover:bg-green-50 bg-[#EAF7E8] transition-colors",children:e.jsx("span",{className:"sm:inline pe-2",children:"الغاء"})}),e.jsx("button",{type:"submit",disabled:i,className:"text-white px-16 text-sm flex items-center gap-1 rounded-lg py-3 hover:bg-green-600 bg-[#3D9635] transition-colors",children:i?e.jsx(v,{color:"#ffffff",size:20}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:A,alt:"plus2",className:"w-4 h-4"}),e.jsx("span",{className:"sm:inline",children:"اضافة"})]})})]})]})})};export{U as default};
